<!DOCTYPE HTML>
<!--
	Spectral by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Justin Wong</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body class="is-preload">

		<!-- Page Wrapper -->
			<div id="page-wrapper">

				<!-- Header -->
				<header id="header">
					<h1><a href="index.html">Project 1</a></h1>
					<nav id="nav">
						<ul>
							<li class="special">
								<a href="#menu" class="menuToggle"></a>
								<div id="menu">
									<ul>
										<li><a href="index.html">Home</a></li>
										<li><a href="Project_1.html">Project 1: <br>Bike sharing analysis</a></li>
										<li><a href="Project_2.html">Project 2: <br>A personal data journey</a></li>
										<li><a href="#About_Me">About Me</a></li>
										<li><a href="#Connect">Let's Connect!</a></li>
									</ul>
								</div>
							</li>
						</ul>
					</nav>
				</header>

				<!-- Main -->
					<article id="main">
						<header>
							<h2>Project 1: Bike sharing analysis</h2>
							<p>Applying structural approach to practical experience</p>
						</header>
						<!--Background-->
						<section class="wrapper stype5">
							<div class="inner">
								<h3>Background</h3>
								<sub>I have 3 years of practical experience in the data space, analyzing, data wrangling, and reporting on sales data. At the end of the Google Data Analytics Professional Certificate, I was presented with the opportunity 
									to apply the the structural approach, aka Data Analysis Lifecycle, from the course in addition to the practical experience I have, 
									onto a real world, most notably an unfamiliar dataset that is collected from customers at Divvy, the bike sharing company. Please enjoy the presentation below!
								</sub>
								<br><br/>
								<div class="image" white-space:normal><iframe src="https://docs.google.com/presentation/d/e/2PACX-1vQC_hVW_SrAwtmqzw7Tll-eCXB1ZE9B-ajAmQzp80nSOIbE4Qo0MqXqjxbV-RvSpJMOvTUXPdOEq3Ao/embed?start=false&loop=false&delayms=5000" frameborder="0" width="960" height="569" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe></div>
								<br><sub><i>I'd like to invite you to learn more about my thought process from dataset creation, data wrangling and the analytical mindset as I went through the topic.</i></sub>
								<hr/>
									<h3>Data Analysis Lifecycle</h3>
									<sub>What is Data Analysis Lifecycle? To put it simply, it is the process of going from data to decision. Data goes through several phases as it gets created, consumed, tested, processed, and reused. A life cycle model enables a structural process and drive toward success by covering both the front and end of the data analysis process.</sub>
									<br><br/>
									Process steps
									<ol>
										<li>ASK</li>
										<li>PREPARE</li>
										<li>PROCESS</li>
										<li>ANALYZE</li>
										<li>SHARE</li>
										<li>ACT</li>
									</ol>
								<p>Let's walk through each of the steps</p>
							</div>
						</section>
						<!--ASK-->
						<section class="wrapper stype5">
							<div class="inner">
								<span class="icon solid fa-question major style4"><span class="label"></span></span><p></p>
								<h2>Step 1: ASK</h2>
								<h4>Identifying the business task</h4>
									<sub>
									<b>ASK</b> is the first step of the lifecycle, and it is to identify the stakeholders, and define the question/problem stakeholders are trying to solve. End goal is set the stage, define the problem, and level set on the expectation on the outcome of the project.
									</sub><br/>
								<p></p>	
								<h4>The question(s)</h4>
								
									<sub><li>How do annual members and casual riders uses cyclistic bikes differently?</li></sub>
									<sub><li>How can we increase conversion?</li></sub>
								
								<p></p>
									<h4>A clear statement of the business ask</h4>
									<sub>Identify three key differences between annual members and casual riders to provide insight as to what obstacles needs to be addressed to increase <b>conversion</b>. Dataset will come directly from Divvy and proposals will be made to the executives and director of marketing, with the executives on the final approval.</sub>
								<br>
								<br />
						</section>
						<!--PREPARE-->
						<section class="wrapper stype5">
							<div class="inner">
								<span class="icon solid fa-folder-open major style4"><span class="label"></span></span><p></p>
								<h2>Step 2: PREPARE</h2>
								<h4>Identify the data source</h4>
									<sub>
									<b>PREPARE</b> is the second step in the life cyce, once the question/problem is identified, we need to identify the correct dataset in terms of source source (where it came from) and time (is it current?) to that can answer the question. 
									</sub><br/>
								<p></p>	
								<h4>The dataset</h4>
									<sub>In this case, the datasource is a first party source directly from Divvy containing transactional data (OLTP) from last 7 years worth of data. So we will be selecting the last 12 months worth of data to ensure it is current and additional data transformation will be necessary to convert into an usable format for analysis. </sub>
									<p></p>
								<h4>Schema</h4>
									<sub>Now that we have our target dataset. Let's start exploring the dataset by looking at its structure, a schema, like the table of content you'd find in a book. Understanding the schema of the dataset is crucial as it describes how each part of the table relates to each other. Below is the schema of the dataset by attributes, data type, and high level description of the attribute. As part of the process to validate data integrity, I run through each attributes with questions around its usability.</sub>
									<p></p>
									<!--Schema Table-->
									<div class="table-wrapper">
										<table class="alt">
											<thead>
												<tr><sub>
													<th><sub>Attributes</sub></th>
													<th><sub>Data Type</sub></th>
													<th><sub>Description and Validation</sub></th>
												</tr>
											</thead>
											<tbody>
												<tr>
													<td><sub>ride_id</sub></td>
													<td><sub>STRING</sub></td>
													<td><sub>
															<li>Unique Identifier by the specific ride</li>
															<li>Average of <b>488,386</b> records/transactions per month.</li>
															<li>Character length ranges bewteen 13 to 20 characters</li>
															<li>All caps</li>
															<p></p>
													</sub></td>
												</tr>
												<tr>
													<td><sub>rideble_type</sub></td>
													<td><sub>STRING</sub></td>
													<td><sub>
														<li>classic_bike</li>
														<li>electric_bike</li>
														<li>docked_bike*</li>
														<sub>
															<i>*'docked_bike' is an odd one. Within the 12 months dataset, this specific category accounts for an average of 22,870 records per month, which translates to ~4.7% of the total dataset per month. A subject matter expert is needed to provide additional clarification on what this category is exactly, what it is trying to capture and how it is used. For the purpose of this exercise, this group is omitted.</i></li>
														<p></p>
														</sub>
													</sub></td>
												</tr>
												<tr>
													<td><sub>started_at</sub></td>
													<td><sub>TIMESTAMP</sub></td>
													<td><sub>
														<li>Captures the start time of a ride</li>
														<li>Identified certain transaction end time can be <b>GREATER</b> than start time. Additional transformation is necessary</li>
													<p></p>
													</sub></td>
												</tr>
												<tr>
													<td><sub>ended_at</sub></td>
													<td><sub>TIMESTAMP</sub></td>
													<td><sub>
														Same description as started_at
													<p></p>
													</sub></td>
												</tr>
												<tr>
													<td><sub>start_station_name</sub></td>
													<td><sub>STRING</sub></td>
													<td><sub>
																<li>Some values are missing.</li>
																<li>Naming convention is also sproatic.</li>
																<li>Need subject matter expert or internal document to decipher naming convetion and usage</li>
													<p></p>
													</sub></td>
												</tr>
												<tr>
													<td><sub>start_station_id</sub></td>
													<td><sub>STRING</sub></td>
													<td><sub>
															Same description as start_station_name.
													<p></p>
													</sub></td>
												</tr>
												<tr>
													<td><sub>end_station_name</sub></td>
													<td><sub>STRING</sub></td>
													<td><sub>
															Same description as start_station_name.
													<p></p>
													</sub></td>
												</tr>
												<tr>
													<td><sub>end_station_id</sub></td>
													<td><sub>STRING</sub></td>
													<td><sub>
															Same description as start_station_name.
													<p></p>
													</sub></td>
												</tr>
												<tr>
													<td><sub>start_lat</sub></td>
													<td><sub>FLOAT</sub></td>
													<td><sub>
															<li>Starting ride position by <b>Latitude</b></li>
															<li>Multiple missing values from 2022'01 dataset</li>
															<li>Additional documentation necessary to understand usage.</li>
													<p></p>
													</sub></td>
												</tr>
												<tr>
													<td><sub>start_lng</sub></td>
													<td><sub>FLOAT</sub></td>
													<td><sub>
															<li>Starting ride position by <b>Longitude</b></li>
															<li>Same description as start_lat</li>
													<p></p>
													</sub></td>
												</tr>
												<tr>
													<td><sub>end_lat</sub></td>
													<td><sub>FLOAT</sub></td>
													<td><sub>
														<li>Ending ride position by <b>Latitude</b></li>
														<li>Multiple missing values from 2022'01 dataset</li>
														<li>Additional documentation necessary to understand usage.</li>
													<p></p>
													</sub></td>
												</tr>
												<tr>
													<td><sub>end_lng</sub></td>
													<td><sub>FLOAT</sub></td>
													<td><sub>
														<li>Ending ride position by <b>Longitude</b></li>
														<li>Same description as start_lat</li>
													<p></p>
													</sub></td>
												</tr>
												<tr>
													<td><sub>member_casual</sub></td>
													<td><sub>STRING</sub></td>
													<td><sub>
															Customer type by 'member' and 'casual'
													<p></p>
													</sub></td>
												</tr>
											</tbody>
										</table>
									</div>
									<sub>There are two groups of observations (station_id/station_name and station_latitude/longtitude) that are not usable without further clarification. Beyond that, insights can still be extracted with the rest of the dataset available. Deeper exploration on the usability and necessary data transformation will be covered in Step 3: PROCESS</sub>
									<p></p>
								<h4>Datasource(s)</h4>	
									<sub>It is important read on the licensing agreement on the source used and equally important to cite it, regardless of where it came from (unless contract tell you otherwise, eg NDA). Luckily, the public dataset provided is already scrubbed of any personally identifiable information so no additional steps needs to be taken around privacy or security concerns aside from citing it on the presentation <a href="https://ride.divvybikes.com/data-license-agreement">Data License Agreement</a></sub>
						</section>
						<!--PROCESS-->
						<section class="wrapper stype5">
							<div class="inner">
								<span class="icon solid fa-list major style4"><span class="label"></span></span><p></p>
								<h2>Step 3: PROCESS</h2>
								<h4>Tools</h4>
									<sub>
									<b>PROCESS</b> is the third step of the lifecycle, where we will dive deep into the data to process and transform the dataset in preparation for the analysis. I personally selected the following tools:
									</sub><br/>
									<sub>
										<li>Microsoft Excel: For basic data exploration</li>
										<li>Google BigQuery: To store and merge the 12 months of data into one table for processing.</li>
									</sub></li>
								<p></p>	
								<h4>Roadblock</h4>
								
									<sub>I was excited to work on an entirely different both in industry but also sheer size of the dataset. Each month was in the realm of 500k observations (rows) totalling to 5.8M observations! So naturally I'd conduct the data interview to get to know the dataset better via Excel. But here's where the first speedbump happened, it took over a minute to open a lightweight CSV file containing just one month of the data. It took even longer to apply basic sorting/filtering to scan for anonmalies within the dataset, I was stuck in a loading loop every step I tried, each action took over 20 seconds to complete. It is not workable... at all.</sub>
									<p></p>
									<sub>The best course of action was to enlist a more powerful tool that's designed to work with large (BIG) databases - <b>SQL</b><br>
										Before we can conduct the data interview, we'd need to first merge 12 months of dataset into one table. Here's a snippet on how I did it:</sub>
									<p></p>
									<pre><code>
...

SELECT ride_id, rideable_type, started_at, ended_at, start_station_name, start_station_id, end_station_name, end_station_id, start_lat, start_lng, end_lat, end_lng, member_casual
FROM Bike_Divvy.202205

UNION ALL

SELECT ride_id, rideable_type, started_at, ended_at, start_station_name, start_station_id, end_station_name, end_station_id, start_lat, start_lng, end_lat, end_lng, member_casual
FROM Bike_Divvy.202204

...
<p style="color:gold;">This query merges all trips (rows) between May'22 and Apr'22. <br>The entire query effectively does the same until we have one table containing 12 months of data. </p>
									</code></pre>
									
								
								<p></p>
									<h4>Data Cleaning Analysis</h4>
									<sub>Now that we have one singular table. We will begin our analytical work on data cleaning. This might sound odd but how is data cleaning, which typically consist of correcting errors like duplications, formatting, missing values, etc. considered as an analysis?</sub>
									<p></p>
									<h5>Quote</h5>
									<blockquote>The act of cleaning data imposes values/judgments/interpretations upon data intended to allow downstream analysis algorithms to function and give results. That’s exactly the same as doing data analysis. In fact, “cleaning” is just a spectrum of reusable data transformations on the path towards doing a full data analysis. <sub><br>-Andy Au <a href="https://counting.substack.com/p/data-cleaning-is-analysis-not-grunt?utm_campaig">Data Cleaning IS Analysis, Not Grunt Work</a></sub><br/>
									</blockquote>
									<sub>I wholeheartedly agree. Cleaning your data not only allows you to know your data but really get into the nitty gritty of it and that "you can only make a confident statement using your data when you know what's been collected, what hasn't been collected, how it's collected, where are the gotchas, where are the hidden dependencies, etc."<i> -Andy Au</i></sub>
									<p></p>
									<sub>Quick refresher on the attritubes we will be diving into: <br></sub>
										<sub><i>(strikedout items are omitted from the proceeding steps of analysis as discussed in Step 2: PREPARE)</i></sub>
									<sub>
										<li>ride_id</li>
										<li>rideable_type</li>
										<li>member_casual</li>
										<li>started_at</li>
										<li>ended_at</li>
										<li><strike>start_station_name</strike></li>
										<li><strike>start_station_id</strike></li>
										<li><strike>end_station_name</strike></li>
										<li><strike>end_station_id</strike></li>
										<li><strike>start_lat</strike></li>
										<li><strike>start_lng</strike></li>
										<li><strike>end_lat</strike></li>
										<li><strike>end_lng</strike></li>
									</sub>
									<hr/>
										<h5>ride_id</h5>
										<sub>
											Ride_ID signify the individual transactions that is recorded in the database, each observation (row) equates to a single trip. If DISTINCT COUNT(*) alias as unique_ride_id vs COUNT(*) alias as total_count is equal, this confirms there are no duplication within ride_id. If it does not equate, then there may be duplicate values to address. Let me explain further on how this work:<br>
											<p></p>
											<li>How does  DISTINCT statement work? This statement returns only distinct (different) values, in another words, in a column that contains duplicate, eg consider the following: "A, B, C, C, A, B", using DISTINCT statement will return only "A", "B", "C". So if number of DISTINCT is the same as COUNT(*)</li>
											<p></p>
											<li>How does COUNT(*) work? COUNT() statement counts the number of rows in a specified column. In this case, * represent all, meaning maximnum number of rows in the table.</li>
										</sub>
										<p></p>
											<pre><code>
SELECT
	DISTINCT(COUNT(ride_id)) AS unique_ride_id,
	COUNT(*) AS total_count
FROM Bike_Divvy.Divvy_Current;
											</code></pre>
											<h6>Results</h6>
											<div class="table-wrapper">
												<table class="alt">
													<thead>
														<tr><sub>
															<th><sub>Row</sub></th>
															<th><sub>unique_ride_id</sub></th>
															<th><sub>total_count</sub></th>
														</tr>
													</thead>
													<tbody>
														<tr>
															<td><sub>1</sub></td>
															<td><sub>5860776</sub></td>
															<td><sub>5860776</sub></td>
														</tr>
													</tbody>
												</table>
											</div>
											<hr/>
											<h5>rideable_type</h5>
												<sub>
											This attribute differentiate the ride type options for users to choose from. DISTINCT statement is used to populate distinct values, aka no duplicates, within the rideable_type attribute, which tells me 2 things
													<li>3 types of ride are offered; classic, docked, and electric.</li> 
													<li>There are no typos. eg, classic_bike can be typo as clasic_bike, clas$ic_bike, etc.</li>
												</sub>
											<p></p>
											<pre><code>
SELECT
	DISTINCT(rideable_type)
FROM Bike_Divvy.Divvy_Current;
											</code></pre>
											<h6>Results</h6>
											<div class="table-wrapper">
												<table class="alt">
													<thead>
														<tr><sub>
															<th><sub>Row</sub></th>
															<th><sub>rideable_type</sub></th>
														</tr>
													</thead>
													<tbody>
														<tr>
															<td><sub>1</sub></td>
															<td><sub>classic_bike</sub></td>
														</tr>
														<tr>
															<td><sub>2</sub></td>
															<td><sub>docked_bike</sub></td>
														</tr>
														<tr>
															<td><sub>3</sub></td>
															<td><sub>electric_bike</sub></td>
														</tr>
													</tbody>
												</table>
											</div>
											<hr/>
											<h5>member_casual</h5>
												<sub>
											This attribute differentiate the user type, by 'Member' which are paid annual members and 'Casual' which are Day Pass holders. To ensure data integirty, DISTINCT statement is used to populate distinct values within the member_casual attribute, which tells me 2 things
													<li>2 types of users; member and casual</li> 
													<li>There are no typos. eg, member can be typo as meber, memberr, memb3r, etc.</li>
												</sub>
											<p></p>
											<pre><code>
SELECT
	DISTINCT(member_casual)
FROM Bike_Divvy.Divvy_Current;
											</code></pre>
											<h6>Results</h6>
											<div class="table-wrapper">
												<table class="alt">
													<thead>
														<tr><sub>
															<th><sub>Row</sub></th>
															<th><sub>member_casual</sub></th>
														</tr>
													</thead>
													<tbody>
														<tr>
															<td><sub>1</sub></td>
															<td><sub>member</sub></td>
														</tr>
														<tr>
															<td><sub>2</sub></td>
															<td><sub>casual</sub></td>
														</tr>
													</tbody>
												</table>
											</div>
											<hr/>
											<h5>STARTED_AT and ENDED_AT</h5>
												<sub>
											This attribute captures the start (started_at) and end (ended_at) attribute of a trip. Naturally, you'd think end time of a trip should always be greater than start time, unless you can time travel, which I will leave that topic to smarter people than me. With that assumption, the first validation step is determine if this is true: <br>
											<p></p>
											By using DATE_DIFF() function, The start (started_at) and end (ended_at) values are converted into SECONDS and then it calculates the difference between the two. ORDER BY is to give sort the output by ASCENDING ORDER, so lower value will show up first. The column is aliased as 'Duration_Seconds' (as best practice) since it is a custom value that is not part of the original dataset.
												</sub>
											<p></p>
											<pre><code>
SELECT
	DATE_DIFF(ended_at,started_at,SECOND) AS Duration_Seconds,
	started_at,
	ended_at
FROM Bike_Divvy.Divvy_Current
ORDER BY Duration_Seconds;
											</code></pre>
											<h6>Results</h6>
											<div class="table-wrapper">
												<table class="alt">
													<thead>
														<tr><sub>
															<th><sub>Row</sub></th>
															<th><sub>Duration_Seconds</sub></th>
															<th><sub>started_at</sub></th>
															<th><sub>ended_at</sub></th>
														</tr>
													</thead>
													<tbody>
														<tr>
															<td><sub>1</sub></td>
															<td><sub>-3482</sub></td>
															<td><sub>2021-11-07 01:58:08 UTC</sub></td>
															<td><sub>2021-11-07 01:00:06 UTC</sub></td>
														</tr>
														<tr>
															<td><sub>2</sub></td>
															<td><sub>-3354</sub></td>
															<td><sub>2021-11-07 01:56:51 UTC</sub></td>
															<td><sub>2021-11-07 01:00:57 UTC</sub></td>
														</tr>
														<tr>
															<td><sub>3</sub></td>
															<td><sub>-3245</sub></td>
															<td><sub>2021-11-07 01:54:50 UTC</sub></td>
															<td><sub>2021-11-07 01:00:45 UTC</sub></td>
														</tr>
														<tr>
															<td><sub>4</sub></td>
															<td><sub>-3227</sub></td>
															<td><sub>2021-11-07 01:55:42 UTC</sub></td>
															<td><sub>2021-11-07 01:01:55 UTC</sub></td>
														</tr>
														<tr>
															<td><sub>5</sub></td>
															<td><sub>-3209</sub></td>
															<td><sub>2021-11-07 01:54:58 UTC</sub></td>
															<td><sub>2021-11-07 01:01:29 UTC</sub></td>
														</tr>

													</tbody>
												</table>
											</div>
											<sub>Do you see where the issue is? <i>(Hint - Duration_Seconds)</i> We have negative values in the trip duration. Either the rider that made the trip was traveling backward in time or an error occured in the data collection process.</sub>
											<p></p>
											<sub>To keep moving forward (mostly because I do not have access to the subject matter expert on this dataset), we will have to filter for these entries and omit so it does not skew the results of our analysis.</sub>
											<p></p>
											<pre><code>

SELECT 
	Duration_Seconds,
	started_at,
	ended_at
FROM	(
	<a style="color:gold;">(1)</a> SELECT 
		*, 
		DATE_DIFF(ended_at,started_at,SECOND) AS Duration_Seconds 
	FROM Bike_Divvy.Divvy_Current
	)
WHERE
	<a style="color:gold;">(2)</a> Duration_Seconds >= 0
ORDER BY Duration_Seconds;
	
<p style ="color:gold;">(1) The inner query(subquery) calculates time difference 
between end and start of a trip as Duration_Seconds.<br>
(2) Outer query filters FOR results where Duration_Seconds 
is equal to or greater than zero (0).</p>
											</code></pre>
											<h6>RESULTS</h6>
											<div class="table-wrapper">
												<table class="alt">
													<thead>
														<tr><sub>
															<th><sub>Row</sub></th>
															<th><sub>Duration_Seconds</sub></th>
															<th><sub>started_at</sub></th>
															<th><sub>ended_at</sub></th>
														</tr>
													</thead>
													<tbody>
														<tr>
															<td><sub>1</sub></td>
															<td><sub>0</sub></td>
															<td><sub>2021-11-07 01:58:08 UTC</sub></td>
															<td><sub>2021-11-07 01:00:06 UTC</sub></td>
														</tr>
														<tr>
															<td><sub>2</sub></td>
															<td><sub>0</sub></td>
															<td><sub>2021-11-07 01:56:51 UTC</sub></td>
															<td><sub>2021-11-07 01:00:57 UTC</sub></td>
														</tr>
														<tr>
															<td><sub>...</sub></td>
															<td><sub>...</sub></td>
															<td><sub>...</sub></td>
															<td><sub>...</sub></td>
														</tr>
														<tr>
															<td><sub>1009249</sub></td>
															<td><sub>303</sub></td>
															<td><sub>2022-05-08 13:19:20 UTC</sub></td>
															<td><sub>2022-05-08 13:24:23 UTC</sub></td>
														</tr>
														<tr>
															<td><sub>1009250</sub></td>
															<td><sub>303</sub></td>
															<td><sub>2022-05-04 17:39:06 UTC</sub></td>
															<td><sub>2022-05-04 17:44:09 UTC</sub></td>
														</tr>

													</tbody>
												</table>
											</div>
											<hr/>
											<h4>DATA TRANSFORMATION</h4>
											<sub>Now that we are done cleaning the data. It is time to transform data into more usable format for an analysis. Start and End time is where I will tackle the analysis - One of the most common way to approach time based attributes is aggregation by time, such as by day of week, time of day, months, year, etc.</sub>
											<p></p>
											<h5>Transformation #1 - Day of Week</h5>
											<sub>We are interested in which day of the week users are more (or less) likely to ride. We will use the start time (start_at) column and extract the specific day of week for further
												analysis.</sub>
											<p></p>
											<pre><code>
--- snippet from part of the query
CASE 
	WHEN EXTRACT(DAYOFWEEK FROM started_at) = 1 THEN 'Sun'
	WHEN EXTRACT(DAYOFWEEK FROM started_at) = 2 THEN 'Mon'
	WHEN EXTRACT(DAYOFWEEK FROM started_at) = 3 THEN 'Tue'
	WHEN EXTRACT(DAYOFWEEK FROM started_at) = 4 THEN 'Wed'
	WHEN EXTRACT(DAYOFWEEK FROM started_at) = 5 THEN 'Thu'
	WHEN EXTRACT(DAYOFWEEK FROM started_at) = 6 THEN 'Fri'
	WHEN EXTRACT(DAYOFWEEK FROM started_at) = 7 THEN 'Sat'
END AS day_of_week

<p style ="color:gold;">By using combination of CASE() and EXTRACT()functions
we are able to convert the start time(start_at) of a trip to day of week</p>
											</code></pre>


						</section>

<!---End of Main Section-->
					</section>

<h2 style="color:red"> WORK IN PROGRESS BELOW </h2>

						<sub text-indent: 10%>Here's what I did:<br><br/></sub>
								<section> 
								<pre><code>
--- snippet from part of the query
FROM (
SELECT *, 
	DATE_DIFF(ended_at,started_at,SECOND) AS Duration_Seconds FROM Bike_Divvy.Divvy_Current)
WHERE 
    Duration_Seconds >= 0;
	)
<p style ="color:gold;">This subquery filters out durations less than 0, now we can proceed to make the output more usable.</p>
								</code></pre>
								</section>
							
								<section id="two" class="wrapper alt style2">
									<section class="spotlight">
										<div style='position: relative'>
													<div class="content">
											
											<h4>(2) Data Transformation</h4>
											<sub>
												The second step of the data clean process is transformating the table for easier aggregation.
												For this particular dataset, we are interested in the days of week riders more frequently ride.
												Therefore we will use the start time (start_at) column and extract the specific day of week for further
												analysis.
											</sub>
										</div>
									</section>
									
									<br />
									<sub>Making the dataset more useful:<br><br/></sub>
									<section> 
									
									<pre><code>
--- snippet from part of the query
CASE 
	WHEN EXTRACT(DAYOFWEEK FROM started_at) = 1 THEN 'Sun'
	WHEN EXTRACT(DAYOFWEEK FROM started_at) = 2 THEN 'Mon'
	WHEN EXTRACT(DAYOFWEEK FROM started_at) = 3 THEN 'Tue'
	WHEN EXTRACT(DAYOFWEEK FROM started_at) = 4 THEN 'Wed'
	WHEN EXTRACT(DAYOFWEEK FROM started_at) = 5 THEN 'Thu'
	WHEN EXTRACT(DAYOFWEEK FROM started_at) = 6 THEN 'Fri'
	WHEN EXTRACT(DAYOFWEEK FROM started_at) = 7 THEN 'Sat'
END AS day_of_week

<p style ="color:gold;">By using combinatino of CASE() and EXTRACT() function we are able to convert the start time of a bike ride (start_at) 
to day of week</p>
									</code></pre>
									</section>
									<section id="two" class="wrapper alt style2">
										<section class="spotlight">
											<div style='position: relative'>
														<div class="content">
												
												<h4>(3) Magic of CTE</h4>
												<sub>
													The final step of the data cleaning process is converting this cleaned up, and transformed
													output into a CTE (virtual table) so it can be stringed with other necessary columns as well as 
													referenced for multiple uses and analysis!
												</sub>
											</div>
										</section>
										<section>
										<br> 
										<sub>Full CTE:<br><br/></sub>
											<pre><code>
WITH Formatted_Divvy_Table AS 
(SELECT 
	*,
	(DATE_DIFF(ended_at,started_at,SECOND))/60 AS Duration_Minutes,
	EXTRACT(MONTH FROM started_at) AS month,
	EXTRACT(YEAR FROM started_at) AS year,
	EXTRACT(DAYOFWEEK FROM started_at) AS day_num_of_week,
	CASE 
	WHEN EXTRACT(DAYOFWEEK FROM started_at) = 1 THEN 'Sun'
	WHEN EXTRACT(DAYOFWEEK FROM started_at) = 2 THEN 'Mon'
	WHEN EXTRACT(DAYOFWEEK FROM started_at) = 3 THEN 'Tue'
	WHEN EXTRACT(DAYOFWEEK FROM started_at) = 4 THEN 'Wed'
	WHEN EXTRACT(DAYOFWEEK FROM started_at) = 5 THEN 'Thu'
	WHEN EXTRACT(DAYOFWEEK FROM started_at) = 6 THEN 'Fri'
	WHEN EXTRACT(DAYOFWEEK FROM started_at) = 7 THEN 'Sat'
	END AS day_of_week
FROM 
	(SELECT *, DATE_DIFF(ended_at,started_at,SECOND) AS Duration_Seconds FROM Bike_Divvy.Divvy_Current)
WHERE 
	Duration_Seconds >= 0
); 
		<p style ="color:gold;">Now this CTE table can be used as base for the rest of the query for the results found in the deck above</p>
											</code></pre>
											</section>
					</article>

				<!-- Footer -->
				<footer id="footer">
					<ul class="icons">
						<li><a href="www.linkedin.com" class="icon brands fa-linkedin"><span class="label">LinkedIn</span></a></li>
						<li><a href="https://github.com/JustinCPwong" class="icon brands fa-github"><span class="label">Github</span></a></li>
						<li><a href="mailto: www.chinpangwong91@gmail.com" class="icon solid fa-envelope"><span class="label">Email</span></a></li>
					</ul>
					<ul class="copyright">
						<li>&copy; JUSTIN WONG</li><li>2022 </li>
					</ul>
				</footer>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>